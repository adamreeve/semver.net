using Xunit;

namespace SemanticVersioning.Tests
{
    public class RangeOperations
    {
        [Theory]
        [InlineData("~1.2.3", ">=1.2.0 < 1.2.6", ">=1.2.3 < 1.2.6")]
        [InlineData("~1.2.3", "~1.3.2", "<0.0.0")]
        [InlineData("~1.2.3", "=1.2.7", "=1.2.7")]
        [InlineData("~1.2.3", "=1.3.2", "<0.0.0")]
        [InlineData("=1.2.3", "=1.2.3", "=1.2.3")]
        [InlineData("=1.2.3", "=1.2.4", "<0.0.0")]
        [InlineData("~1.2.3 || ~1.3.2", ">=1.2.9 < 1.3.8", "~1.2.9 || >=1.3.2 < 1.3.8")]
        [InlineData("<3.0.0", ">=3.0.0", "<0.0.0")]
        [InlineData("^2", "^3", "<0.0.0")]
        [InlineData(">=1.0.0 <2.0.0", ">1.0.0", ">1.0.0 <2.0.0")]
        [InlineData(">1.0.0", ">=1.0.0 <2.0.0", ">1.0.0 <2.0.0")]
        [InlineData(">1.0.0 <2.0.0", "<=2.0.0", ">1.0.0 <2.0.0")]
        [InlineData("<=2.0.0", ">1.0.0 <2.0.0", ">1.0.0 <2.0.0")]
        public void Intersect(string a, string b, string intersect)
        {
            var rangeA = new Range(a);
            var rangeB = new Range(b);
            var expected = new Range(intersect);

            var rangeIntersect = rangeA.Intersect(rangeB);
            Assert.Equal(expected, rangeIntersect);
        }
    }
}
